"use strict";var app=angular.module("googApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/",templateUrl:"/html/home.html",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}),t.otherwise("/")}]),app.run(["AuthService",function(e){e.init()}]);var app=angular.module("googApp");app.service("AuthService",["$http","$state","UserService",function(e,t,n){this.logout=function(){e["delete"]("/users/authenticate").then(function(e){n.destroy(),t.go("home")})},this.register=function(t){return e.post("/users/register",t).then(function(e){return n.set(e.data),e.data},function(e){return console.error(e)})},this.login=function(t){return e.post("/users/authenticate",t).then(function(e){return n.set(e.data),e.data},function(e){return console.error(e)})},this.init=function(){return e.get("/users/profile").then(function(e){return n.set(e.data),e.data},function(e){return console.error(e)})}}]);var app=angular.module("googApp");app.service("InstaService",function(){this.set=function(e){this.instagram=e.map(function(e){if(e.location){var t={image:e.images.low_resolution.url,address:e.location.name,lat:e.location.latitude,lng:e.location.longitude,link:e.link};return t}}).filter(function(e){return e?e:void 0})},this.destroy=function(){this.instagram=null}});var app=angular.module("googApp");app.service("UserService",function(){this.set=function(e){this.locations=e.locations,this.username=e.username,this._id=e._id,this.user=e},this.destroy=function(){this.locations=null,this.username=null,this._id=null}});var app=angular.module("googApp");app.service("NavService",["$http","UserService","InstaService",function(e,t,n){this.getCoords=function(n){function o(){var o=new google.maps.Geocoder;o.geocode({address:n},function(n,o){if(o===google.maps.GeocoderStatus.OK){var r={address:n[0].formatted_address,lat:n[0].geometry.location.lat(),lng:n[0].geometry.location.lng()};return e.post("/users/locations",r).then(function(e){return t.set(e.data),e.data},function(e){console.error("err: ",e)})}alert("Geocode was not successful for the following reason: "+o)})}o()},this.removeLocation=function(n){e["delete"]("/users/locations/"+n.address).then(function(e){return t.set(e.data)},function(e){return console.error(e)})},this.getPhotos=function(){return e.get("/users/instagram").then(function(e){return n.set(e.data.data)},function(e){return console.error(e)})}}]);var app=angular.module("googApp");app.controller("homeCtrl",["$scope","AuthService","NavService","UserService","InstaService",function(e,t,n,o,r){function a(){var t={zoom:4,center:new google.maps.LatLng(40,-98),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),t),e.markers=[];for(var n=new google.maps.InfoWindow,o=function(t){var o=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(t.lat,t.lng),title:t.address});o.content='<div class="infoWindowContent">PICTURE!</div>',google.maps.event.addListener(o,"click",function(){n.setContent("<h2>"+o.title+"</h2>"+o.content),n.open(e.map,o)}),e.markers.push(o)},r=0;r<e.locations.length;r++)o(e.locations[r])}function i(){var t={zoom:4,center:new google.maps.LatLng(40,-98),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),t);for(var n=new google.maps.InfoWindow,o=function(t){var o=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(t.lat,t.lng),title:t.address});o.content='<img class="infoWindowContent" src=\''+t.image+"'></img>",google.maps.event.addListener(o,"click",function(){n.setContent("<h2>"+o.title+"</h2>"+o.content),n.open(e.map,o)}),e.markers.push(o)},r=0;r<e.instagram.length;r++)o(e.instagram[r])}e.$watch(function(){return o.locations},function(t){e.locations=t,a()}),e.$watch(function(){return r.instagram},function(t){e.instagram=t,i()}),e.openInfoWindow=function(e,t){e.preventDefault(),google.maps.event.trigger(t,"click")},e.openInfoWindow=function(e,t){e.preventDefault(),google.maps.event.trigger(t,"click")}}]);var app=angular.module("googApp");app.controller("loginCtrl",["$scope","$state","AuthService",function(e,t,n){e.login=function(e){n.login(e).then(function(e){t.go("home")},function(e){console.error("err: ",e)})},e.register=function(e){n.register(e).then(function(e){t.go("home")},function(e){console.error("err: ",e)})}}]);var app=angular.module("googApp");app.controller("navCtrl",["$scope","UserService","AuthService","NavService","InstaService",function(e,t,n,o,r){e.$watch(function(){return t.user},function(t){e.username=t.username,e.locations=t.locations}),e.$watch(function(){return r.instagram},function(t){e.instagram=t}),e.logout=function(){n.logout(),e.username=null,e.locations=null},e.getCoords=function(){o.getCoords(e.location.address)},e.removeLocation=function(e){o.removeLocation(e)},e.getPhotos=function(){o.getPhotos()}}]);
//# sourceMappingURL=bundle.js.map
