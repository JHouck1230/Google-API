"use strict";var app=angular.module("googApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(e,o){e.state("home",{url:"/",templateUrl:"/html/home.html",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}),o.otherwise("/")}]),app.run(["AuthService",function(e){e.init()}]);var app=angular.module("googApp");app.controller("homeCtrl",["$scope","AuthService","NavService","UserService",function(e,o,t,n){function r(){var o={zoom:4,center:new google.maps.LatLng(40,-98),mapTypeId:google.maps.MapTypeId.TERRAIN};e.map=new google.maps.Map(document.getElementById("map"),o),e.markers=[];for(var t=new google.maps.InfoWindow,n=function(o){var n=new google.maps.Marker({map:e.map,position:new google.maps.LatLng(o.lat,o.lng),title:o.address});n.content='<div class="infoWindowContent">PICTURE!</div>',google.maps.event.addListener(n,"click",function(){t.setContent("<h2>"+n.title+"</h2>"+n.content),t.open(e.map,n)}),e.markers.push(n)},r=0;r<e.locations.length;r++)n(e.locations[r])}e.$watch(function(){return n.locations},function(o){e.locations=o,r()}),e.openInfoWindow=function(e,o){e.preventDefault(),google.maps.event.trigger(o,"click")}}]);var app=angular.module("googApp");app.controller("loginCtrl",["$scope","$state","AuthService",function(e,o,t){e.login=function(e){t.login(e).then(function(e){o.go("home")},function(e){console.error("err: ",e)})},e.register=function(e){t.register(e).then(function(e){o.go("home")},function(e){console.error("err: ",e)})}}]);var app=angular.module("googApp");app.controller("navCtrl",["$scope","UserService","AuthService","NavService",function(e,o,t,n){e.$watch(function(){return o.user},function(o){e.username=o.username,e.locations=o.locations}),e.logout=function(){t.logout()},e.getCoords=function(){n.getCoords(e.location.address)},e.removeLocation=function(e){n.removeLocation(e)},e.getPhotos=function(){console.log("works"),n.getPhotos().then(function(e){console.log(e)},function(e){return console.error(e)})}}]);var app=angular.module("googApp");app.service("AuthService",["$http","$state","UserService",function(e,o,t){this.logout=function(){e["delete"]("/users/authenticate").then(function(e){t.destroy(),o.go("home")})},this.register=function(o){return e.post("/users/register",o).then(function(e){return t.set(e.data),e.data},function(e){return console.error(e)})},this.login=function(o){return e.post("/users/authenticate",o).then(function(e){return t.set(e.data),e.data},function(e){return console.error(e)})},this.init=function(){return e.get("/users/profile").then(function(e){return t.set(e.data),e.data},function(e){return console.error(e)})}}]);var app=angular.module("googApp");app.service("UserService",function(){this.set=function(e){this.locations=e.locations,this.username=e.username,this._id=e._id,this.user=e},this.destroy=function(){this.locations=null,this.username=null,this._id=null}});var app=angular.module("googApp");app.service("NavService",["$http","UserService",function(e,o){this.getCoords=function(t){function n(){var n=new google.maps.Geocoder;n.geocode({address:t},function(t,n){if(n===google.maps.GeocoderStatus.OK){var r={address:t[0].formatted_address,lat:t[0].geometry.location.lat(),lng:t[0].geometry.location.lng()};return e.post("/users/locations",r).then(function(e){return o.set(e.data),e.data},function(e){console.error("err: ",e)})}alert("Geocode was not successful for the following reason: "+n)})}n()},this.removeLocation=function(t){e["delete"]("/users/locations/"+t.address).then(function(e){return o.set(e.data)},function(e){return console.error(e)})},this.getPhotos=function(){return e.get("https://api.instagram.com/v1/users/self/media/recent/?access_token=2033796677.5b767b5.bcd256e058db4e8ea6e1a4be730a7a91")}}]);
//# sourceMappingURL=bundle.js.map
