"use strict";var app=angular.module("googApp",["ui.router"]);app.config(["$stateProvider","$urlRouterProvider",function(o,e){o.state("home",{url:"/",templateUrl:"/html/home.html",controller:"homeCtrl"}).state("login",{url:"/login",templateUrl:"/html/login.html",controller:"loginCtrl"}),e.otherwise("/")}]),app.run(["AuthService",function(o){o.init()}]);var app=angular.module("googApp");app.controller("homeCtrl",["$scope","AuthService","NavService","UserService",function(o,e,t,n){function r(){var e={zoom:4,center:new google.maps.LatLng(40,-98),mapTypeId:google.maps.MapTypeId.TERRAIN};o.map=new google.maps.Map(document.getElementById("map"),e),o.markers=[];for(var t=new google.maps.InfoWindow,n=function(e){var n=new google.maps.Marker({map:o.map,position:new google.maps.LatLng(e.lat,e.lng),title:e.address});n.content='<div class="infoWindowContent">PICTURE!</div>',google.maps.event.addListener(n,"click",function(){t.setContent("<h2>"+n.title+"</h2>"+n.content),t.open(o.map,n)}),o.markers.push(n)},r=0;r<o.locations.length;r++)console.log("loca [i]: ",o.locations[r]),n(o.locations[r])}o.$watch(function(){return n.locations},function(e){o.locations=e,r()}),o.openInfoWindow=function(o,e){o.preventDefault(),google.maps.event.trigger(e,"click")}}]);var app=angular.module("googApp");app.controller("loginCtrl",["$scope","$state","AuthService",function(o,e,t){o.login=function(o){t.login(o).then(function(o){e.go("home")},function(o){console.error("err: ",o)})},o.register=function(o){t.register(o).then(function(o){e.go("home")},function(o){console.error("err: ",o)})}}]);var app=angular.module("googApp");app.controller("navCtrl",["$scope","UserService","AuthService","NavService",function(o,e,t,n){o.$watch(function(){return e.username},function(e){o.username=e}),o.logout=function(){t.logout()},o.getCoords=function(){n.getCoords(o.location.address)}}]);var app=angular.module("googApp");app.service("AuthService",["$http","$state","UserService",function(o,e,t){this.logout=function(){o["delete"]("/users/authenticate").then(function(o){t.destroy(),e.go("home")})},this.register=function(e){return o.post("/users/register",e).then(function(o){return t.set(o.data),o.data},function(o){return console.error(o)})},this.login=function(e){return o.post("/users/authenticate",e).then(function(o){return t.set(o.data),o.data},function(o){return console.error(o)})},this.init=function(){return o.get("/users/profile").then(function(o){return t.set(o.data),o.data},function(o){return console.error(o)})}}]);var app=angular.module("googApp");app.service("MapService",function(){this.set=function(o){this.locations.push(o)},this.destroy=function(){this.locations=[]}});var app=angular.module("googApp");app.service("UserService",function(){this.set=function(o){this.locations=o.locations,this.username=o.username,this._id=o._id},this.destroy=function(){this.locations=null,this.username=null,this._id=null}});var app=angular.module("googApp");app.service("NavService",["$http",function(o){this.getCoords=function(e){function t(){var t=new google.maps.Geocoder;t.geocode({address:e},function(e,t){if(t===google.maps.GeocoderStatus.OK){var n={address:e[0].formatted_address,lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()};return console.log("location: ",n),o.post("/users/locations",n).then(function(o){return console.log("res.data: ",o.data),o.data},function(o){console.error("err: ",o)})}alert("Geocode was not successful for the following reason: "+t)})}t()}}]);
//# sourceMappingURL=bundle.js.map
